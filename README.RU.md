# Bermuda Reflection

**[English version](README.md)**

–ú–æ—â–Ω—ã–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏ PHP —Å–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (–∞—Ç—Ä–∏–±—É—Ç–æ–≤). –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ PHP 8+ –∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üöÄ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**: –í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏
- üéØ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤**: –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ PHP 8+
- üîç **–ì–ª—É–±–æ–∫–∏–π –ø–æ–∏—Å–∫**: –ü–æ–∏—Å–∫ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –≤ —á–ª–µ–Ω–∞—Ö –∫–ª–∞—Å—Å–∞ (–º–µ—Ç–æ–¥—ã, —Å–≤–æ–π—Å—Ç–≤–∞, –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã)
- üß© **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ä–µ—Ñ–ª–µ–∫—Å–∏—è**: –£–º–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏ –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- üíæ **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–∞–º—è—Ç–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏
- üîß **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–∂–µ–Ω–µ—Ä–∏–∫ —Ç–∏–ø–æ–≤ –¥–ª—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
composer require bermudaphp/reflection
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- PHP 8.4 –∏–ª–∏ –≤—ã—à–µ

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ë–∞–∑–æ–≤–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤

```php
use Bermuda\Reflection\Reflection;

class UserController
{
    #[Route('/api/users')]
    #[Auth('admin')]
    public function index(): Response
    {
        // —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–∞
    }
}

$reflection = new ReflectionMethod(UserController::class, 'index');

// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∞—Ç—Ä–∏–±—É—Ç—ã
$attributes = Reflection::getMetadata($reflection);

// –ü–æ–ª—É—á–∏—Ç—å –∞—Ç—Ä–∏–±—É—Ç—ã –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞
$routes = Reflection::getMetadata($reflection, Route::class);

// –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–≤—ã–π –∞—Ç—Ä–∏–±—É—Ç –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞
$route = Reflection::getFirstMetadata($reflection, Route::class);

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞
$hasAuth = Reflection::hasMetadata($reflection, Auth::class); // true
```

### –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ä–µ—Ñ–ª–µ–∫—Å–∏—è

```php
use Bermuda\Reflection\Reflection;

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
$reflection = Reflection::reflect('MyClass');           // ReflectionClass
$reflection = Reflection::reflect($object);             // ReflectionObject  
$reflection = Reflection::reflect('function_name');     // ReflectionFunction
$reflection = Reflection::reflect([$obj, 'method']);    // ReflectionMethod
$reflection = Reflection::reflect(fn() => true);       // ReflectionFunction
```

## –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ì–ª—É–±–æ–∫–∏–π –ø–æ–∏—Å–∫ –∞—Ç—Ä–∏–±—É—Ç–æ–≤

–ü–æ–∏—Å–∫ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –Ω–µ —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–∞–º–æ–º –∫–ª–∞—Å—Å–µ, –Ω–æ –∏ –Ω–∞ –≤—Å–µ—Ö –µ–≥–æ —á–ª–µ–Ω–∞—Ö:

```php
use Bermuda\Reflection\Reflection;

class UserService
{
    #[Inject]
    private UserRepository $repository;
    
    #[Route('/users')]
    #[Cache(ttl: 3600)]
    public function getUsers(): array
    {
        return $this->repository->findAll();
    }
    
    #[Deprecated('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ getUsers() –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ')]
    public const OLD_ENDPOINT = '/api/users';
}

$reflection = new ReflectionClass(UserService::class);

// –ü–æ–ª—É—á–∏—Ç—å –í–°–ï –∞—Ç—Ä–∏–±—É—Ç—ã –∏–∑ –∫–ª–∞—Å—Å–∞ –∏ –µ–≥–æ —á–ª–µ–Ω–æ–≤
$allAttributes = Reflection::getDeepMetadata($reflection);
/*
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
[
    'UserService::$repository' => [Inject],
    'UserService::getUsers' => [Route, Cache],
    'UserService::OLD_ENDPOINT' => [Deprecated]
]
*/

// –ü–æ–ª—É—á–∏—Ç—å –∞—Ç—Ä–∏–±—É—Ç—ã –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ –æ—Ç–æ–≤—Å—é–¥—É –≤ –∫–ª–∞—Å—Å–µ
$injectAttributes = Reflection::getDeepMetadata($reflection, Inject::class);
/*
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
[
    'UserService::$repository' => [Inject]
]
*/

// –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–≤–æ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞ –≤ –∫–ª–∞—Å—Å–µ
$firstRoute = Reflection::getFirstDeepMetadata($reflection, Route::class);

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ –∞—Ç—Ä–∏–±—É—Ç –≥–¥–µ-–ª–∏–±–æ –≤ –∫–ª–∞—Å—Å–µ
$hasInject = Reflection::hasDeepMetadata($reflection, Inject::class); // true
```

### –§–æ—Ä–º–∞—Ç –ø—É—Ç–µ–π –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –º–µ—Å—Ç–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤:

- `ClassName` - –ê—Ç—Ä–∏–±—É—Ç –Ω–∞ —Å–∞–º–æ–º –∫–ª–∞—Å—Å–µ
- `ClassName::methodName` - –ê—Ç—Ä–∏–±—É—Ç –Ω–∞ –º–µ—Ç–æ–¥–µ
- `ClassName::$propertyName` - –ê—Ç—Ä–∏–±—É—Ç –Ω–∞ —Å–≤–æ–π—Å—Ç–≤–µ
- `ClassName::CONSTANT_NAME` - –ê—Ç—Ä–∏–±—É—Ç –Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–µ –∫–ª–∞—Å—Å–∞

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏

–ö–ª–∞—Å—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫—ç—à–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç—ã —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

```php
use Bermuda\Reflection\Reflection;

// –ü–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤ —Å–æ–∑–¥–∞—ë—Ç –∏ –∫—ç—à–∏—Ä—É–µ—Ç ReflectionClass
$reflection1 = Reflection::class('MyClass');

// –í—Ç–æ—Ä–æ–π –≤—ã–∑–æ–≤ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä (–±—ã—Å—Ç—Ä–µ–µ)
$reflection2 = Reflection::class('MyClass');

// $reflection1 === $reflection2 (—Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç)

// –†—É—á–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ä–µ—Ñ–ª–µ–∫—Ç–æ—Ä–∞ –≤ –∫—ç—à
Reflection::addReflector('my-key', $customReflector);
```

## –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ API

### –ú–µ—Ç–æ–¥—ã –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

#### `getMetadata()`
```php
public static function getMetadata(
    ReflectionFunctionAbstract|ReflectionClass|ReflectionParameter|ReflectionConstant $reflector,
    ?string $name = null
): ?array
```

–ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∞—Ç—Ä–∏–±—É—Ç—ã –∏–∑ –æ–±—ä–µ–∫—Ç–∞ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ –∏–º–µ–Ω–∏ –∫–ª–∞—Å—Å–∞ –∞—Ç—Ä–∏–±—É—Ç–∞.

```php
$allAttributes = Reflection::getMetadata($reflection);
$routeAttributes = Reflection::getMetadata($reflection, Route::class);
```

#### `getFirstMetadata()`
```php
public static function getFirstMetadata(
    ReflectionFunctionAbstract|ReflectionClass|ReflectionParameter|ReflectionConstant|ReflectionProperty $reflector,
    string $name
): ?object
```

–ü–æ–ª—É—á–∞–µ—Ç –ø–µ—Ä–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –∞—Ç—Ä–∏–±—É—Ç–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞.

```php
$route = Reflection::getFirstMetadata($methodReflection, Route::class);
if ($route) {
    echo $route->path; // '/api/users'
}
```

#### `hasMetadata()`
```php
public static function hasMetadata(
    ReflectionFunctionAbstract|ReflectionClass|ReflectionParameter|ReflectionConstant|ReflectionProperty $reflector,
    string $name
): bool
```

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ —É –æ–±—ä–µ–∫—Ç–∞ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏ –∞—Ç—Ä–∏–±—É—Ç—ã —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞.

```php
if (Reflection::hasMetadata($reflection, Cache::class)) {
    // –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –ª–æ–≥–∏–∫—É –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
}
```

### –ú–µ—Ç–æ–¥—ã –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞

#### `getDeepMetadata()`
```php
public static function getDeepMetadata(
    ReflectionClass $reflector,
    ?string $name = null
): array
```

–ò—â–µ—Ç –∞—Ç—Ä–∏–±—É—Ç—ã –≤ –∫–ª–∞—Å—Å–µ –∏ –≤—Å–µ—Ö –µ–≥–æ —á–ª–µ–Ω–∞—Ö (–º–µ—Ç–æ–¥—ã, —Å–≤–æ–π—Å—Ç–≤–∞, –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã).

```php
// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∞—Ç—Ä–∏–±—É—Ç—ã –æ—Ç–æ–≤—Å—é–¥—É –≤ –∫–ª–∞—Å—Å–µ
$allAttributes = Reflection::getDeepMetadata($classReflection);

// –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ Route –∞—Ç—Ä–∏–±—É—Ç—ã –æ—Ç–æ–≤—Å—é–¥—É –≤ –∫–ª–∞—Å—Å–µ
$routes = Reflection::getDeepMetadata($classReflection, Route::class);
```

#### `getFirstDeepMetadata()`
```php
public static function getFirstDeepMetadata(
    ReflectionClass $reflector,
    string $name
): ?object
```

–ü–æ–ª—É—á–∞–µ—Ç –ø–µ—Ä–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –∞—Ç—Ä–∏–±—É—Ç–∞, –Ω–∞–π–¥–µ–Ω–Ω—ã–π –≥–¥–µ-–ª–∏–±–æ –≤ –∫–ª–∞—Å—Å–µ.

```php
$firstRoute = Reflection::getFirstDeepMetadata($classReflection, Route::class);
```

#### `hasDeepMetadata()`
```php
public static function hasDeepMetadata(
    ReflectionClass $reflector,
    string $name
): bool
```

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ —É –∫–ª–∞—Å—Å–∞ –∏–ª–∏ –ª—é–±–æ–≥–æ –∏–∑ –µ–≥–æ —á–ª–µ–Ω–æ–≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π –∞—Ç—Ä–∏–±—É—Ç.

```php
if (Reflection::hasDeepMetadata($classReflection, Inject::class)) {
    // –ö–ª–∞—Å—Å –≥–¥–µ-—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
}
```

### –ú–µ—Ç–æ–¥—ã —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏

#### `reflect()`
```php
public static function reflect(mixed $var): null|ReflectionFunctionAbstract|ReflectionClass|ReflectionObject
```

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ç–∏–ø —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏.

```php
$reflection = Reflection::reflect('MyClass');        // ReflectionClass
$reflection = Reflection::reflect($instance);        // ReflectionObject
$reflection = Reflection::reflect('strlen');         // ReflectionFunction
$reflection = Reflection::reflect([$obj, 'method']); // ReflectionMethod
```

#### `callable()`
```php
public static function callable(callable $callable): ReflectionFunctionAbstract
```

–°–æ–∑–¥–∞—ë—Ç —Ä–µ—Ñ–ª–µ–∫—Å–∏—é –¥–ª—è –≤—ã–∑—ã–≤–∞–µ–º—ã—Ö —Ç–∏–ø–æ–≤ (—Ñ—É–Ω–∫—Ü–∏–∏, –º–µ—Ç–æ–¥—ã, –∑–∞–º—ã–∫–∞–Ω–∏—è).

```php
$reflection = Reflection::callable('strlen');           // ReflectionFunction
$reflection = Reflection::callable([$obj, 'method']);   // ReflectionMethod
$reflection = Reflection::callable(fn() => true);      // ReflectionFunction
$reflection = Reflection::callable('Class::method');    // ReflectionMethod
```

#### `object()`
```php
public static function object(object $object): ReflectionObject
```

–°–æ–∑–¥–∞—ë—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π ReflectionObject –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –æ–±—ä–µ–∫—Ç–∞.

```php
$reflection = Reflection::object($userInstance);
echo $reflection->getName(); // 'User'
```

#### `class()`
```php
public static function class(string $class): ?ReflectionClass
```

–°–æ–∑–¥–∞—ë—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π ReflectionClass –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –∏–º–µ–Ω–∏ –∫–ª–∞—Å—Å–∞. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç null, –µ—Å–ª–∏ –∫–ª–∞—Å—Å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.

```php
$reflection = Reflection::class('User');
$reflection = Reflection::class('NonExistentClass'); // null
```

## –ü—Ä–∏–º–µ—Ä—ã –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –º–∏—Ä–∞

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```php
use Bermuda\Reflection\Reflection;

class Container
{
    public function autowire(string $className): object
    {
        $reflection = Reflection::class($className);
        
        if (!$reflection) {
            throw new Exception("–ö–ª–∞—Å—Å $className –Ω–µ –Ω–∞–π–¥–µ–Ω");
        }
        
        $constructor = $reflection->getConstructor();
        if (!$constructor) {
            return new $className();
        }
        
        $dependencies = [];
        foreach ($constructor->getParameters() as $parameter) {
            $type = $parameter->getType();
            if ($type && !$type->isBuiltin()) {
                $dependencies[] = $this->autowire($type->getName());
            }
        }
        
        return new $className(...$dependencies);
    }
}
```

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤

```php
use Bermuda\Reflection\Reflection;

class RouteDiscovery
{
    public function discoverRoutes(array $controllerClasses): array
    {
        $routes = [];
        
        foreach ($controllerClasses as $className) {
            $reflection = Reflection::class($className);
            
            // –ù–∞–π—Ç–∏ –≤—Å–µ Route –∞—Ç—Ä–∏–±—É—Ç—ã –≤ –∫–ª–∞—Å—Å–µ
            $routeAttributes = Reflection::getDeepMetadata($reflection, Route::class);
            
            foreach ($routeAttributes as $path => $attributes) {
                foreach ($attributes as $route) {
                    $routes[] = [
                        'path' => $route->path,
                        'handler' => $path,
                        'methods' => $route->methods ?? ['GET']
                    ];
                }
            }
        }
        
        return $routes;
    }
}
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏

```php
use Bermuda\Reflection\Reflection;

class Validator
{
    public function validate(object $entity): array
    {
        $reflection = Reflection::object($entity);
        $errors = [];
        
        foreach ($reflection->getProperties() as $property) {
            $value = $property->getValue($entity);
            
            // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞—Ç—Ä–∏–±—É—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
            $required = Reflection::getFirstMetadata($property, Required::class);
            if ($required && empty($value)) {
                $errors[] = "{$property->getName()} –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è";
            }
            
            $length = Reflection::getFirstMetadata($property, Length::class);
            if ($length && strlen($value) > $length->max) {
                $errors[] = "{$property->getName()} —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ";
            }
        }
        
        return $errors;
    }
}
```

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π

```php
use Bermuda\Reflection\Reflection;

class EventManager
{
    public function registerHandlers(object $listener): void
    {
        $reflection = Reflection::object($listener);
        
        foreach ($reflection->getMethods() as $method) {
            $eventHandler = Reflection::getFirstMetadata($method, EventHandler::class);
            
            if ($eventHandler) {
                $this->addEventListener(
                    $eventHandler->eventType,
                    [$listener, $method->getName()]
                );
            }
        }
    }
}
```

## –°–æ–≤–µ—Ç—ã –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ö–ª–∞—Å—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫—ç—à–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç—ã —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏, –ø–æ—ç—Ç–æ–º—É –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –≤–º–µ—Å—Ç–æ —Ä—É—á–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —Ä–µ—Ñ–ª–µ–∫—Å–∏–π
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø–æ–∏—Å–∫–∏**: –ü—Ä–∏ –ø–æ–∏—Å–∫–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –∏–º—è –∫–ª–∞—Å—Å–∞, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –Ω–µ–Ω—É–∂–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–ª—É–±–æ–∫–∏–π –ø–æ–∏—Å–∫ —Ä–∞–∑—É–º–Ω–æ**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–ª—É–±–æ–∫–∏–π –ø–æ–∏—Å–∫ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –∏—Å–∫–∞—Ç—å –≤ —á–ª–µ–Ω–∞—Ö –∫–ª–∞—Å—Å–∞, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω –±–æ–ª–µ–µ –∑–∞—Ç—Ä–∞—Ç–Ω—ã–π —á–µ–º –æ–±—ã—á–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
4. **–ì—Ä—É–ø–ø–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**: –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∫–ª–∞—Å—Å–∞–º–∏ —Å–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT - —Å–º–æ—Ç—Ä–∏—Ç–µ —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.
